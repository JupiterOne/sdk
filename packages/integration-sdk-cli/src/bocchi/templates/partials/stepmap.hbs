{{log ../../steps this}}
{
  id: Steps.{{constantCase id}},
  name: '{{name}}',
  entities: [Entities.{{constantCase entity.name}}],
  relationships: [],
  dependsOn: [
    {{#each dependsOn}}
    '{{this}}'{{#unless @last}},{{/unless}}
    {{/each}}
  ],
  executionHandler: {{camelCase id}},
},
{{#if directRelationships}}
{{#each directRelationships as | relationship |}}
{
  {{#with (entityByType ..this relationship.targetType) as |targetStep|}}
  {{log this relationship targetStep}}
  id: Steps.BUILD_{{constantCase entity.name}}_{{constantCase targetStep.entity.name}}_RELATIONSHIPS
  name: 'Build {{entity.name}} {{targetentity.name}} Relationships',
  entities: [],
  relationships: [
    Relationships.{{constantCase entity.name}}_{{constantCase relationship._class}}_{{constantCase targetStep.entity.name}}
  ],
  dependsOn: [
    Steps.{{constantCase id}},
    Steps.{{constantCase targetStep.id}},
  ],
  executionHandler: build{{pascalCase entity.name}}{{pascalCase relationship._class}}{{pascalCase targetStep.entity.name}}Relationships,
  {{/with}}
}
{{/each}}
{{/if}}